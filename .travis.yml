sudo: required
language: node_js
node_js:
- '7'
services:
- docker
before_install:
- sudo apt-get update
- sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-engine
- docker build -t dsumiskum/mockapi .
after_success:
- if [ "$TRAVIS_BRANCH" == "master" ]; then docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
  docker push dsumiskum/mockapi; fi
deploy:
  provider: npm
  email: dylan.sumiskum@live.com
  api_key: $NPM_TOKEN
  on:
    tags: true
    repo: gegana/mockapi
